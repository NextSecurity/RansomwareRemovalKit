if("undefined"===typeof ZDVTools){var ZDVTools={version:1.1,self:null,win:window,enableDebug:!1,enableSafeFramesHack:!1,enableMutations:!1,scriptUrl:"//static.ziffdavis.com/jst/zdvtools.min.js",onViewable:[],onLoaded:[],timings:{init:{timestamp:(new Date).getTime(),timing:window.performance&&performance.now?performance.now()/1E3:null},DFPinit:{timestamp:null,timing:null}},ads:{},_observer:null,_options:null,_tickerInterval:null,_UUID:null,_msgs:"",_isIFrame:window==window.top?!1:!0,throttleDown:function(){var a=
ZDVTools;a._tickerInterval&&a.win.clearInterval(a._tickerInterval);a._tickerInterval=a.win.setInterval(a._tick,150);a.debug("ZDVTools: Slowing down watchdog")},stop:function(){var a=ZDVTools;a._tickerInterval&&a.win.clearInterval(a._tickerInterval);a._observer&&a._observer.disconnect()},debug:function(a,b){window.console&&(window.ZDVTools||parent.ZDVTools||top.ZDVTools).enableDebug&&(b||(b="green"),console.log("%c"+a,"color: "+b))},generateUUID:function(){return"xxxxxxxxxxxxxyxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,
function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})},trackZDBB:function(a,b,d,c){var f=ZDVTools;d||(d=f.getName(b));c||(c=f.getAd());f.debug("ZDVTools: AD "+a+": "+d+" "+c.size+" "+c[a.toLowerCase()].timing);b=f.win.googletag||null;a=["http://zdbb.net/n/WU2TPsgLEeSUDxIxPSpF6g?agent=zdvtool","ev="+encodeURIComponent(a||""),"li="+encodeURIComponent(c.lineItemId||""),"cid="+encodeURIComponent(c.creativeId||""),"slot="+encodeURIComponent(c.containerId||""),"size="+encodeURIComponent(c.size),
"name="+encodeURIComponent(d),"corrid="+encodeURIComponent(c.correlatorId||b?b.pubads().getCorrelator()||"":""),"ptime="+encodeURIComponent(c.init?c.init.timing:""),"stime="+encodeURIComponent(c.loaded?c.loaded.timing:""),"ftime="+encodeURIComponent(c.viewable?c.viewable.timing:""),"moatftime="+encodeURIComponent(c.moatViewable?c.moatViewable.timing:""),"zc="+encodeURIComponent(c.uuid||c.slot?c.slot.getTargeting("zc")||"":""),"zcp="+encodeURIComponent(f._UUID||""),"adtype="+encodeURIComponent(c.safeFrame?
"safeFrame":"fif")];d=f.win.document.createElement("img");d.width=1;d.height=1;d.alt="zdvtools";d.style.position="absolute";d.src=a.join("&");f.debug("ZDVTools BBPIXEL: "+d.src,"blue");return!0},getName:function(a){try{var b=("string"===typeof a?a:a.id).match(/google_ads_iframe_(.+)/)[1];return b&&-1==b.indexOf("__hidden")?b:null}catch(d){return null}},getAd:function(a,b){if(!a)return null;var d=ZDVTools;"undefined"===typeof d.ads[a]&&(d.ads[a]=[]);var c=d.ads[a]&&0<d.ads[a].length?d.ads[a].length-
1:0;b&&d.ads[a]&&(c+=1);"undefined"===typeof d.ads[a][c]&&d.ads[a].push({name:a,adUnitPath:null,init:null,loaded:null,viewable:null,moatViewable:null,creativeId:null,lineItemId:null,containerId:null,size:null,width:null,height:null,slot:null,uuid:null,safeFrame:!1});return d.ads[a][c]},_adLoaded:function(){if(!this||!this.src||"about:blank"!==this.src){var a=ZDVTools,b=a.getName(this);if(b){var d=a.getAd(b);if(!d.loaded){d.loaded={timestamp:(new Date).getTime(),timing:a.win.performance&&a.win.performance.now?
a.win.performance.now()/1E3:(new Date).getTime()-a.timings.init.timestamp};a.trackZDBB("LOADED",this,b,d);for(b=0;b<a.onLoaded.length;b++)a.onLoaded[b](d);try{var a={},c;for(c in d)"slot"!=c&&(a[c]=d[c]);window.postMessage({agent:"zdvtool",event:"adLoaded",elementId:d.containerId,ad:a},"*")}catch(f){}}}else a.debug("ZDVTools sanity error on ad loaded "+this.id)}},_adViewable:function(a,b,d,c,f){var e=ZDVTools;try{if(window.parent!=window&&window.parent.ZDVTools)return window.parent.ZDVTools.adViewable(a,
b,d,c,f)}catch(g){}a||(a=this);b||(b=e.getName(a));if(b){d||(d=e.getAd(b));c=d.loaded;f=f?"moatViewable":"viewable";c&&c.timing?d[f]={timestamp:(new Date).getTime(),timing:e.win.performance&&e.win.performance.now?e.win.performance.now()/1E3-c.timing:(new Date).getTime()-c.timestamp}:(e.debug("ZDVTools sanity error: ad viewable but not loaded "+a.id),d[f]={timestamp:(new Date).getTime(),timing:e.win.performance&&e.win.performance.now?e.win.performance.now()/1E3:(new Date).getTime()-e.timings.init.timestamp},
d[f].timing=-d[f].timing);e.trackZDBB(f.toUpperCase(),a,b,d);if(e.onViewable&&d.viewable)for(a=0;a<e.onViewable.length;a++)e.onViewable[a](d);try{var e={},h;for(h in d)"slot"!=h&&(e[h]=d[h]);window.postMessage({agent:"zdvtool",event:"adViewable",elementId:d.containerId,ad:e},"*")}catch(l){}}else e.debug("ZDVTools sanity error on ad viewable: can't find iframe "+a.id)},_tick:function(){for(var a=ZDVTools,b=a.win.document.getElementsByTagName("iframe"),d=0;d<b.length;d++){var c=b[d],f=a.getName(c);
if(f){var e=a.getAd(f),g=null;c._ZDVToolsOnLoad||(c.addEventListener("load",a._adLoaded,!1),c._ZDVToolsOnLoad=!0);e.init||(e.init={timestamp:(new Date).getTime(),timing:a.win.performance&&a.win.performance.now?a.win.performance.now()/1E3:(new Date).getTime()-a.timings.init.timestamp});if(!e.safeFrame||a.enableSafeFramesHack){try{g=c.contentWindow?c.contentWindow:null}catch(h){if(!a.enableSafeFramesHack||-1!=c.name.indexOf(a.scriptUrl)||e.safeFrame){e.safeFrame=!0;continue}a._bootstrapSafeFrame(c)}try{if(!e.viewable&&
g&&g.google_image_requests&&g.google_image_requests.length)for(var l=0;l<g.google_image_requests.length;l++){var k=g.google_image_requests[l].src;k&&-1==a._msgs.indexOf(k+" ")&&(-1!=k.indexOf("pagead2.googlesyndication.com/activeview?")&&a._adViewable(c,f,e,k),a._msgs+=k+" ")}}catch(m){}}}}},_bootstrapSafeFrame:function(a,b,d){if(a&&a.name&&a.src){a.id||(a.id="safeframe-"+Math.round(1E4*Math.random()));var c=ZDVTools;if(c.enableSafeFramesHack&&-1==a.name.indexOf(c.scriptUrl)){b=c.getName(a);d||(d=
c.getAd(b));var f=a.src;b='<script>window.safeFrameId="'+a.id+'";\x3c/script><script src="'+c.scriptUrl+'">\x3c/script>';a.src="about:blank";a.name=-1!=a.name.indexOf("/script>")?a.name.replace("\x3c/script>","\x3c/script>"+b):a.name.replace("</body>",b+"</body>");c.debug("ZDVTools: bootstrapping safeframe "+a.id);d.safeFrame||(d.safeFrame="rebooting",a.addEventListener("load",function(){if("about:blank"==this.src||"javascript:\"<html><body style='background:transparent'></body></html>"==this.src)this.contentWindow.name=
this.name,this.src=f,d.safeFrame="bootstrapped",c.debug("ZDVTools: bootstrapped frame "+a.id)}))}}},_tickInsideSafeFrame:function(){if("undefined"!==typeof google_image_requests&&google_image_requests.length){window._msgs||(window._msgs="");for(var a=0;a<google_image_requests.length;a++){var b=google_image_requests[a].src;if(b&&-1==window._msgs.indexOf(b+" ")){if(-1!=b.indexOf("pagead2.googlesyndication.com/activeview?")){try{parent.postMessage({agent:"zdvtoolsSafeFrame",event:"VIEWABLE",url:b,name:window.name,
safeFrameUrl:window.location.href,safeFrameId:window.safeFrameId||""},"*")}catch(d){var c=ZDVTools,f=c.getName(window.safeFrameId||"safeFrameAd");c._adViewable(null,f,c.getAd(f),b)}window._ZDVTickerInterval&&window.clearInterval(window._ZDVTickerInterval)}window._msgs+=b+" "}}}},receiveCrossFrameMessage:function(a){var b=a.data;if("string"==typeof b)try{b=JSON.parse(b)}catch(d){return}if(b.agent&&"zdvtoolsSafeFrame"==b.agent){a=ZDVTools;var c=b.safeFrameId?document.getElementById(b.safeFrameId):null;
if(!c||!a.getName(c)||!c)if(b.name)try{c=document.getElementsByName(b.name)[0],a.getName(c)}catch(f){a.debug("Missing Safeframe in DOM");return}else if(b.safeFrameUrl)for(var e=document.getElementsByTagName("iframe"),g=0;g<e.length;g++){var h=e[g];if(h.src==b.safeFrameUrl){c=h;a.getName(c);break}}"VIEWABLE"==b.event?a._adViewable(c,null,null,b.url):"MOATVIEWABLE"==b.event?a._adViewable(c,null,null,null,b.url):"SAFEFRAMEINIT"==b.event?(b=a.getName(c),a=a.getAd(b),a.safeFrame||(a.safeFrame="native")):
"SETSAFEFRAMEID"==b.event&&b.safeFrameId&&(window.safeFrameId=b.safeFrameId)}},initInsideSafeFrame:function(a,b){window._ZDVTickerInterval=window.setInterval(a._tickInsideSafeFrame,25);if(!parent.postMessage){var d=a.getName(window.safeFrameId||window.name);a.getAd(d).init={timestamp:(new Date).getTime(),timing:a.win.performance&&a.win.performance.now?a.win.performance.now()/1E3:(new Date).getTime()-a.timings.init.timestamp};window.addEventListener("load",a._adLoaded,!1)}},initDFP:function(){var a=
ZDVTools&&ZDVTools.win?ZDVTools.win:window;a.googletag=a.googletag||{};a.googletag.cmd=a.googletag.cmd||[];googletag.cmd.push(function(){(window.ZDVTools?window.ZDVTools:top.ZDVTools).timings.DFPinit={timestamp:(new Date).getTime(),timing:window.performance&&performance.now?performance.now():null};googletag.pubads().addEventListener("slotRenderEnded",function(a){var b=(window.ZDVTools||top.ZDVTools).getAd(a.slot.getSlotId().a);b.adUnitPath=a.slot.getAdUnitPath();b.creativeId=a.creativeId;b.lineItemId=
a.lineItemId;b.containerId=a.slot.getSlotId().d;b.correlatorId=googletag.pubads().getCorrelator();b.size=a.size[0]+"x"+a.size[1];b.width=a.size[0];b.height=a.size[1];b.slot=a.slot;b.uuid=a.slot.getTargeting("zc")||null;a=googletag.pubads().j||{};a.zcp&&(zdv._UUID=a.zcp)});var a=googletag.pubads();a.refresh_orig=a.refresh;a.refresh=function(a,b){var f=window.ZDVTools?window.ZDVTools:top.ZDVTools,e;for(e in f.ads)if(a)for(var g=0;g<a.length;g++){if(a[g].getAdUnitPath()==f.ads[e][f.ads[e].length-1].adUnitPath){f.getAd(e,
"addnew");break}}else f.getAd(e,"addnew");googletag.pubads().refresh_orig(a,b)}})},init:function(a,b){if(document.addEventListener){try{if(window.parent!=window&&window.parent.ZDVTools)return}catch(d){return a.initInsideSafeFrame(a,b)}a.self=a;a.win=b&&b.window?b.window:window;b&&b.onLoad&&a.onLoaded.push(b.onLoad);b&&b.onLoaded&&a.onLoaded.push(b.onLoaded);b&&b.onViewed&&a.onViewable.push(b.onViewed);b&&b.onViewable&&a.onViewable.push(b.onViewable);a.enableDebug=b&&"undefined"!==typeof b.enableDebug?
b.enableDebug:a.enableDebug;a.enableDebug=b&&"undefined"!==typeof b.debug?b.debug:a.enableDebug;a.enableSafeFramesHack=b&&"undefined"!==typeof b.enableSafeFramesHack?b.enableSafeFramesHack:a.enableSafeFramesHack;b&&b.UUID&&(a._UUID=b.UUID);b&&b.gcp&&(a._UUID=b.gcp);b&&b.initTiming&&(a.timings.init=b.initTiming);a.win.addEventListener("message",a.receiveCrossFrameMessage,!1);a.initDFP();a._tickerInterval=a.win.setInterval(a._tick,75);setTimeout(a.throttleDown,22E3);return a}}};ZDVTools.init(ZDVTools,
"undefined"!==typeof window.ZDVOptions?window.ZDVOptions:null)};
